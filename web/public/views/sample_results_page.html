<!DOCTYPE html>
<html>
<title>Betterment Brigade</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
<style>
body,h1,h2,h3,h4,h5,h6 {font-family: "Raleway", Arial, Helvetica, sans-serif}
.myLink {display: none}
.topnav input[type=text] {
  border: 1px solid #ccc;
border-radius: 4px;}
.topnav .search-container {
  float: right;
  margin: 0;
}

.hide { display:none; }

.w3-half button {
    margin: 8px;
    padding-left: auto;
    padding-right: auto;
    width: 20%;
    text-align:center;
    border: 1px solid #eee;
    border-radius: 20px;
    box-shadow: 5px 5px 5px #eee;
    text-shadow:none;

}

input[type=submit] {
    margin: 8px;
    padding: 7px;
    width: 20%;
    border: 1px solid #eee;
    border-radius: 20px;
    box-shadow: 5px 5px 5px #eee;
    text-shadow:none;
}

</style>

<body class="w3-light-grey">

<!-- Navigation Bar -->
<div class="w3-bar w3-white w3-large topnav">
  <a href="Betterment_Brigade-home.html" class="w3-bar-item w3-button w3-red w3-mobile"><i class="fas fa-american-sign-language-interpreting"></i>Betterment Brigade</a>
  <!--<a href="#Home" class="w3-bar-item w3-button w3-light-grey w3-mobile">Home</a>-->
  <a href="create_event_page.html" class="w3-bar-item w3-button w3-mobile">Events</a>
  <a href="login.html" id="log-in" class="w3-bar-item w3-button w3-mobile">Log In</a>
  <a href="" class="hide" id="log-out" class="w3-bar-item w3-button w3-mobile">Sign Out</a>
  <div class="search-container">
      <input id="user_input" type="text" placeholder="Search.." name="search">
      <button id="search" type="submit" class="w3-button w3-hover-red w3-text-grey"><i class="fa fa-search"></i></button>
  </div>


  <!--<a href="#Sign_Up" class="w3-bar-item w3-button w3-mobile">Sign Up</a>-->
</div>


</header>

<script src="jquery/js/jquery-1.9.0.min.js"></script>
  <script src="jquery/js/jquery-ui-1.10.0.custom.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.5.9/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyDvaotjUxQJGK3hserXMZNbmSmqoaM6B0g",
      authDomain: "friendlychat-95c3a.firebaseapp.com",
      databaseURL: "https://friendlychat-95c3a.firebaseio.com",
      projectId: "friendlychat-95c3a",
      storageBucket: "friendlychat-95c3a.appspot.com",
      messagingSenderId: "967898898697"
    };
    firebase.initializeApp(config);
  </script>

  <script src="../scripts/l_flow.js"></script>

<script>
    $('#search').click(function(){
            localStorage.setItem("search",document.getElementById('user_input').value);
            window.location.assign('sample_results_page.html')     
           });
</script>

<div class="w3-content" style="max-width:1100px;">

<div class="w3-container w3-row-padding">
    <h2>Results</h2>
</div>
<!-- Page content -->
<div id="eventsList" class="w3-row-padding">


  <div class="w3-row-padding">
<!--     <div class="w3-half w3-margin-bottom">
      <a href="#Ocean_helper"><img src="oppo1.png" alt="Clean the beach" style="width:100%"></a>
      <div class="w3-container w3-white">
        <h3>Ocean helper</h3>
        <p class="w3-opacity">Event date: 8/20/2020</p>
        <p class="w3-opacity">Event location: venice beach/LA</p>
        <p>Come help clean the garbage off venice beach</p>
        <div class="w3-margin-bottom">
           <input type="submit" id="submit" class="w3-button w3-dark-grey" value="More Info" onclick="window.location='view_event_page.html'">
        </div>
      </div>
    </div>
    <div class="w3-half w3-margin-bottom">
      <a href="#Plant_a_tree"><img src="oppo2.jpg" alt="Plant a tree" style="width:100%"></a>
      <div class="w3-container w3-white">
        <h3>Plant a tree</h3>
        <p class="w3-opacity">Event date: 4/13/2019 (Only 3 days left!)</p>
        <p class="w3-opacity">Event location: Muirwood park/SF</p>
        <p>Plant a tree and bring more green to the world.</p>
        <div class="w3-margin-bottom">
           <input type="submit" id="submit" class="w3-button w3-dark-grey" value="More Info" onclick="window.location='view_event_page.html'">
        </div>
      </div>
    </div> -->
  </div>
</div>


<!-- Footer -->
<footer class="w3-container w3-center w3-opacity w3-margin-bottom">
  <h5>Find Us On</h5>
  <div class="w3-xlarge w3-padding-16">
    <i class="fab fa-facebook-square w3-hover-opacity"></i>
    <i class="fab fa-twitter-square w3-hover-opacity"></i>
    <i class="fab fa-snapchat-square w3-hover-opacity"></i>
    <i class="fab fa-instagram w3-hover-opacity"></i>
    <i class="fab fa-pinterest-square w3-hover-opacity"></i>
    <i class="fab fa-linkedin w3-hover-opacity"></i>
  </div>
</footer>



<script src="jquery/js/jquery-1.9.0.min.js"></script>
  <script src="jquery/js/jquery-ui-1.10.0.custom.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.5.9/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyDvaotjUxQJGK3hserXMZNbmSmqoaM6B0g",
      authDomain: "friendlychat-95c3a.firebaseapp.com",
      databaseURL: "https://friendlychat-95c3a.firebaseio.com",
      projectId: "friendlychat-95c3a",
      storageBucket: "friendlychat-95c3a.appspot.com",
      messagingSenderId: "967898898697"
    };
    firebase.initializeApp(config);
  </script>

<script>
var database = firebase.database();
var ref = database.ref('Published_Event')
var search = localStorage.getItem("search")
const result_title = ref.orderByChild('Title').startAt(search).endAt(search+'\uf8ff');
const result_zip = ref.orderByChild('Zipcode').equalTo(search);


result_title.once('value',gettData)
        function gettData(data){
          var guess = data.val();
          var keys = Object.keys(guess);
        for(var i = 0; i < keys.length; i++){
          var keyvalue = keys[i]
          var datestart = guess[keyvalue].StartDate;
          var dateend = guess[keyvalue].EndDate;
          var title = guess[keyvalue].Title;
          var location = guess[keyvalue].Location;
          var city = guess[keyvalue].City;
          var zipcode = guess[keyvalue].Zipcode;

          var element = document.getElementById('eventsList');

          var div = document.createElement('div')
          div.id = keyvalue;
          div.className = "w3-half w3-margin-bottom"
          element.prepend(div)

          var img = document.createElement('img')
          img.setAttribute('src', "oppo3.jpeg");
          img.setAttribute("width", "100%");
          div.appendChild(img)
          img.id = keyvalue

          var div_inner = document.createElement('div')
          div_inner.className = "w3-container w3-white"
          div_inner.id = keyvalue;
          div.appendChild(div_inner)

          var h = document.createElement('h3')
          var t = document.createTextNode(title);
          h.appendChild(t);
          div_inner.appendChild(h)

          var para = document.createElement("p");
          var t = document.createTextNode("Date: " + datestart.split('T',1));
          para.appendChild(t);
          div_inner.appendChild(para)

          var para = document.createElement("p");
          var t = document.createTextNode("City: " + city);
          para.appendChild(t);
          div_inner.appendChild(para)

          var para = document.createElement("p");
          var t = document.createTextNode("Zipcode : " + zipcode);
          para.appendChild(t);
          div_inner.appendChild(para)


           var moreInfo = document.createElement("BUTTON");
            var t = document.createTextNode("More Info");
            moreInfo.appendChild(t);
            moreInfo.className = "More_info w3-button w3-dark-grey"
            div_inner.appendChild(moreInfo)
            $('.More_info').click(function(){
            localStorage.setItem("event_id",this.closest('div').id);
            console.log('1')
            window.location.assign('view_event_page.html')
           });

          }
}

  result_zip.once('value',getData)
        function getData(data){
          var guess = data.val();
          var keys = Object.keys(guess);
        for(var i = 0; i < keys.length; i++){
          var keyvalue = keys[i]
          var datestart = guess[keyvalue].StartDate;
          var dateend = guess[keyvalue].EndDate;
          var title = guess[keyvalue].Title;
          var location = guess[keyvalue].Location;
          var city = guess[keyvalue].City;
          var zipcode = guess[keyvalue].Zipcode;

          var element = document.getElementById('eventsList');

          var div = document.createElement('div')
          div.id = keyvalue;
          div.className = "w3-half w3-margin-bottom"
          element.prepend(div)

          var img = document.createElement('img')
          img.setAttribute('src', "oppo3.jpeg");
          img.setAttribute("width", "100%");
          div.appendChild(img)
          img.id = keyvalue

          var div_inner = document.createElement('div')
          div_inner.className = "w3-container w3-white"
          div_inner.id = keyvalue;
          div.appendChild(div_inner)

          var h = document.createElement('h3')
          var t = document.createTextNode(title);
          h.appendChild(t);
          div_inner.appendChild(h)

          var para = document.createElement("p");
          var t = document.createTextNode("Date: " + datestart.split('T',1));
          para.appendChild(t);
          div_inner.appendChild(para)

          var para = document.createElement("p");
          var t = document.createTextNode("City: " + city);
          para.appendChild(t);
          div_inner.appendChild(para)

          var para = document.createElement("p");
          var t = document.createTextNode("Zipcode : " + zipcode);
          para.appendChild(t);
          div_inner.appendChild(para)

          var moreInfo = document.createElement("BUTTON");
            var t = document.createTextNode("More Info");
            moreInfo.appendChild(t);
            moreInfo.className = "More_info w3-button w3-dark-grey"
            console.log(moreInfo.className)
            div_inner.appendChild(moreInfo)

            $('.More_info').click(function(){
            localStorage.setItem("event_id",this.closest('div').id);
            console.log('1')
            window.location.assign('view_event_page.html')
           });


          }
        }




</script>

<script>
    $('#search').click(function(){
            localStorage.setItem("search",document.getElementById('user_input').value);
            window.location.assign('sample_results_page.html')
           });
</script>

</body>
</html>
